(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{402:function(e,t,n){e.exports=n(915)},902:function(e,t,n){},915:function(e,t,n){"use strict";n.r(t);var o,r,a=n(36),c=n(37),i=n(39),l=n(38),u=n(40),s=n(1),p=n.n(s),m=n(7),h=n(398),d=n(223),f=n(16),g=n(399),v=function(e,t,n){return t+e*(n-t)},S=function(e,t,n,o){var r,a,c,i=(a=function(){return localStorage},void 0===(r=o)?"function"===typeof a?a():a:r.inject);if(void 0!==i){var l=i.getItem(e);c=null===l?t:n.fromString(l)}else c=t;var u=Object(s.useState)(c),p=Object(g.a)(u,2),m=p[0],h=p[1];return{value:m,handleChange:function(t){h(t),void 0!==i&&i.setItem(e,n.toString(t))}}},y={Boolean:(o=function(e){return!0===e?"true":"false"},r=function(e){return"true"===e},{toString:o,fromString:r})},b=f.Tree.TreeNode;function E(e){var t,n=e.songList,o=e.searchString,r=e.onSelectSong,a=S(T,!1,y.Boolean);function c(e){var t=e[0],o=n.find(function(e){return e.id===t});o&&r(o)}function i(e){return p.a.createElement(f.Tree,{showIcon:!0,onSelect:c},e.map(function(e){return p.a.createElement(b,{key:e.id,title:"".concat(e.name," - ").concat(e.artist)})}))}return p.a.createElement("div",null,p.a.createElement("div",{className:"groupByArtistDiv transparentBackground"},p.a.createElement(f.Checkbox,{className:"groupByArtistCheckbox transparentText",defaultChecked:a.value,onChange:function(){a.handleChange(!a.value)}},"Group by artist")),void 0===o?a.value?(t=C(n).sort(A).map(function(e){return e.sort(k)}),p.a.createElement(f.Tree,{showIcon:!0,switcherIcon:p.a.createElement(f.Icon,{type:"down"}),onSelect:c},t.map(function(e,t){var n="".concat(t);return p.a.createElement(b,{key:n,title:"".concat(e[0].artist," (").concat(e.length,")")},e.map(function(e){return p.a.createElement(b,{key:e.id,title:"".concat(e.name)})}))}))):i(n.sort(k)):i(n.map(function(e){return e}).sort(j(o))))}var T="groupByArtist",w=function(e,t){var n=e.name.toLowerCase(),o=e.artist.toLowerCase();return n.startsWith(t)?4:o.startsWith(t)?3:n.includes(t)?2:o.includes(t)?1:0},j=function(e){var t=e.toLowerCase();return function(e,n){var o=w(e,t),r=w(n,t);return o<r?1:o>r?-1:0}},C=function(e){var t=[],n=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){for(var i=a.value,l=!1,u=0,s=t;u<s.length;u++){var p=s[u];p[0].artist===i.artist&&(p.push(i),l=!0)}l||t.push([i])}}catch(m){o=!0,r=m}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return t.sort(function(e,t){var n=e[0].artist.toUpperCase(),o=t[0].artist.toUpperCase();return n<o?-1:n>o?1:0})},O=function(e){return function(t,n){var o=e(t).toUpperCase(),r=e(n).toUpperCase();return o<r?-1:o>r?1:0}},k=O(function(e){return e.name}),A=O(function(e){return e[0].artist}),x=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement(f.Spin,{size:"large",className:"absoluteCenter"})}}]),t}(s.Component),B=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).onSearchSong=function(e){n.setState({searchString:e.length>0?e:void 0})},n.onSelectSong=function(e){n.props.history.push("/song/"+"".concat(e.url))},fetch("".concat("/tabz","/content/list.json")).then(function(e){return e.json()}).then(function(e){return n.setState({songList:e})});var o=n.props.match.params.errorMsg;return void 0!==o&&(f.message.error(o),n.props.history.replace("/")),n.state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.state.songList,n=this.state.searchString;return void 0===t?s.createElement(x,null):s.createElement("div",null,s.createElement(f.Typography.Title,null,"Select song (",t.length,")"),s.createElement(f.Input.Search,{placeholder:"Search by artist / song name",size:"default",onChange:function(t){return e.onSearchSong(t.target.value)},allowClear:!0}),s.createElement(E,{songList:t,searchString:n,onSelectSong:this.onSelectSong}))}}]),t}(s.Component),M=(n(902),f.Typography.Title,f.Typography.Text,function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.song,n=e.defaultSelectedVersion,o=e.onSelectVersion,r=t.versions;return s.createElement("div",{className:"versionSelector"},r.length>1&&s.createElement("div",null,r.map(function(e,t){return s.createElement(f.Button,{key:"".concat(t),onClick:function(){return o(t)},type:e===n?"primary":"default"},e.name)})))}}]),t}(s.Component)),V=(f.Typography.Title,f.Typography.Text,f.Typography.Paragraph,function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).touchStartTime=void 0,n.touchStartLocation=void 0,n.onDoubleClick=function(){n.props.onClick()},n.onTouchStart=function(e){n.touchStartTime=window.performance.now(),n.touchStartLocation={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},n.props.onPress(!0)},n.onTouchEnd=function(e){var t=window.performance.now()-n.touchStartTime,o={x:e.changedTouches[0].clientX-n.touchStartLocation.x,y:e.changedTouches[0].clientY-n.touchStartLocation.y},r=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2));t<=150&&r<=20&&n.props.onClick(),n.props.onPress(!1)},n.state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.version.content.split("\n");return s.createElement("div",{onDoubleClick:this.onDoubleClick,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},e.map(function(e,t){return s.createElement("pre",{key:t,className:"songParagraph"},e)}))}}]),t}(s.Component)),L=n(396),F={min:600,max:60,default:180},P=function(e){return"ass-".concat(e.id)},z=function(e){if(void 0!==localStorage){var t=localStorage.getItem(P(e));if(null!==t)return Number(t)}return void 0!==e.duration?e.duration:F.default},D=function(e,t,n){var o=void 0===n?localStorage:n;o&&o.setItem(P(e),String(t))},I=(f.Typography.Title,f.Typography.Text),N=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).windowResizeEventHandler=function(){n.setState({browserZoomLevel:window.devicePixelRatio})},n.onSliderChange=function(e){n.props.onSetSpeed(U(e))},n.afterSliderChange=function(e){D(n.props.songVersion,U(e))},n.state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.windowResizeEventHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.windowResizeEventHandler)}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.autoScrollSpeed,o=e.onToggle,r=this.state.browserZoomLevel;return s.createElement("div",null,s.createElement(f.Tooltip,{title:"Also activated by poking / double-clicking anywhere!",mouseEnterDelay:1},s.createElement(f.Button,{onClick:o,type:t?"primary":"default"},"Autoscroll ".concat(t?"ON":"OFF"))),s.createElement(f.Slider,{className:"autoScrollSlider",min:0,max:100,value:R(n),marks:Object(L.a)({},R(F.default),""),onChange:this.onSliderChange,onAfterChange:this.afterSliderChange}),s.createElement("div",{className:"autoScrollValueDiv transparentBackground"},s.createElement(I,{className:"autoScrollValueLabel transparentText"},"".concat(Math.floor(n/60)," min ").concat(Math.floor(n)%60>0?Math.floor(n)%60+" sec":""))),1!==r&&s.createElement(f.Alert,{style:{marginTop:"10px",fontSize:"10px",padding:"4px 4px 4px 4px",textAlign:"center"},message:"Browser is zoomed !",type:"error"}))}}]),t}(s.Component),R=function(e){return v((e-F.min)/(F.max-F.min),0,100)},U=function(e){return v(e/100,F.min,F.max)},q=n(397),W=f.Typography.Title,H=(f.Typography.Text,function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).scrollDivRef=void 0,n.isCurrentlyMounted=!1,n.lastAutoScrollUpdate=void 0,n.scrollingFractions=0,n.onSelectVersion=function(e){n.props.history.push("/song/".concat(n.props.match.params.uri,"/").concat(e))},n.goToBeginning=function(){q.animateScroll.scrollToTop()},n.onToggleAutoScroll=function(){"autoScrollActive"in n.state&&n.setState({autoScrollActive:!n.state.autoScrollActive})},n.onSetAutoScrollSpeed=function(e){n.setState({autoScrollSpeed:e})},n.returnToPreviousMenu=function(){n.props.history.push("/")},n.updateAutoScroll=function(){var e=window.performance.now();if(n.isCurrentlyMounted&&"autoScrollActive"in n.state&&n.state.autoScrollActive&&n.scrollDivRef&&void 0!==n.lastAutoScrollUpdate){var t=n.state.autoScrollSpeed,o=n.scrollDivRef.getBoundingClientRect(),r=(o.bottom-o.top-window.innerHeight)*(e-n.lastAutoScrollUpdate)/(1e3*t)+n.scrollingFractions,a=Math.floor(r),c=r-a;n.scrollingFractions=c,window.scrollBy(0,a),window.requestAnimationFrame(n.updateAutoScroll)}else window.requestAnimationFrame(n.updateAutoScroll),n.scrollingFractions=0;n.lastAutoScrollUpdate=e},n.temp=!1;var o=e.match.params.uri;return fetch("".concat("/tabz","/content/").concat(o)).then(function(e){return e.json()}).catch(function(){n.props.history.replace("/error/Song not found :(")}).then(function(t){void 0!==t&&n.selectVersionFromProps(t,e)}),n.state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,window.requestAnimationFrame=window.requestAnimationFrame||function(e){return setTimeout(e,50)},window.requestAnimationFrame(this.updateAutoScroll),window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1}},{key:"componentWillReceiveProps",value:function(e){"song"in this.state&&this.selectVersionFromProps(this.state.song,e)}},{key:"selectVersionFromProps",value:function(e,t){var n=t.match.params.selectedVersionIndex,o=e.versions[void 0!==n&&n<e.versions.length?n:0];this.setState({song:e,selectedVersion:o,autoScrollSpeed:z(o),autoScrollActive:!1})}},{key:"render",value:function(){var e=this;if("song"in this.state){var t=this.state,n=t.song,o=t.selectedVersion,r=t.autoScrollActive,a=t.autoScrollSpeed;return s.createElement("div",{ref:function(t){return e.scrollDivRef=t}},s.createElement(W,null,n.artist),s.createElement(W,{level:2},n.name),s.createElement("div",null,s.createElement(M,{song:n,defaultSelectedVersion:o,onSelectVersion:this.onSelectVersion}),s.createElement(f.Affix,{className:"autoScrollConfigBox",offsetTop:0},s.createElement(N,{songVersion:o,enabled:r,autoScrollSpeed:a,onToggle:this.onToggleAutoScroll,onSetSpeed:this.onSetAutoScrollSpeed}))),s.createElement("br",null),s.createElement(f.Tag,{color:"blue"},o.instrument),"guitar"===o.instrument&&s.createElement(f.Tag,{color:"volcano"},o.tuning),s.createElement(V,{song:n,version:o,onClick:this.onToggleAutoScroll,onPress:function(t){t?(e.temp=r,e.setState({autoScrollActive:!1})):e.temp&&e.setState({autoScrollActive:!0})}}),s.createElement("br",null),s.createElement("div",null,s.createElement(f.Button,{onClick:this.goToBeginning},"To beginning"),s.createElement(f.Button,{onClick:this.returnToPreviousMenu},"To song selection")))}return s.createElement(x,null)}}]),t}(s.Component)),J=(f.Typography.Title,f.Typography.Text),X=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.createElement("div",null,s.createElement(J,null,"Page not found :("))}}]),t}(s.Component),Y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.bgUrl;return s.createElement("div",{style:{backgroundImage:e?"url(".concat(e,")"):"",backgroundSize:"auto 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},s.createElement(h.a,{basename:"/tabz"},s.createElement(d.c,null,s.createElement(d.a,{exact:!0,path:"/",component:B}),s.createElement(d.a,{path:"/error/:errorMsg",component:B}),s.createElement(d.a,{path:"/song/:uri/:selectedVersionIndex?",component:H}),s.createElement(d.a,{component:X}))))}}]),t}(s.Component),Z=document.getElementById("root");Object(m.render)(s.createElement(Y,null),Z)}},[[402,2,1]]]);
//# sourceMappingURL=main.90d6c65a.chunk.js.map