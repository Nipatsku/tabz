(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{401:function(e,t,n){e.exports=n(914)},901:function(e,t,n){},914:function(e,t,n){"use strict";n.r(t);var o=n(32),r=n(33),a=n(35),c=n(34),i=n(36),l=n(1),u=n(7),s=n(398),p=n(223),h=n(16),m=h.Tree.TreeNode,d=(h.Typography.Text,function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).onSelectTreeNode=function(e){var t=n.props,o=t.songList,r=t.onSelectSong,a=e[0],c=o.find(function(e){return e.id===a});c&&r(c)},n.toggleGroupByArtist=function(){var e=!n.state.groupByArtist;n.setState({groupByArtist:e}),localStorage&&localStorage.setItem(g,String(e))};var r=!0;if(localStorage){var i=localStorage.getItem(g);void 0!==i&&(r="true"===i)}return n.state={groupByArtist:r},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"renderSongTree",value:function(e){return l.createElement(h.Tree,{showIcon:!0,switcherIcon:l.createElement(h.Icon,{type:"down"}),onSelect:this.onSelectTreeNode},e.map(function(e,t){var n="".concat(t);return l.createElement(m,{key:n,title:"".concat(e[0].artist," (").concat(e.length,")")},e.map(function(e){return l.createElement(m,{key:e.id,title:"".concat(e.name)})}))}))}},{key:"renderSongList",value:function(e){return l.createElement(h.Tree,{showIcon:!0,onSelect:this.onSelectTreeNode},e.map(function(e){return l.createElement(m,{key:e.id,title:"".concat(e.name," - ").concat(e.artist)})}))}},{key:"render",value:function(){var e=this.props,t=e.songList,n=e.searchString,o=this.state.groupByArtist;return l.createElement("div",null,l.createElement("div",{className:"groupByArtistDiv"},l.createElement(h.Checkbox,{defaultChecked:o,onChange:this.toggleGroupByArtist},"Group by artist")),void 0===n?o?this.renderSongTree(v(t).sort(T).map(function(e){return e.sort(b)})):this.renderSongList(t.sort(b)):this.renderSongList(t.map(function(e){return e}).sort(S(n))))}}]),t}(l.Component)),g="groupByArtist",f=function(e,t){var n=e.name.toLowerCase(),o=e.artist.toLowerCase();return n.startsWith(t)?4:o.startsWith(t)?3:n.includes(t)?2:o.includes(t)?1:0},S=function(e){var t=e.toLowerCase();return function(e,n){var o=f(e,t),r=f(n,t);return o<r?1:o>r?-1:0}},v=function(e){var t=[],n=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){for(var i=a.value,l=!1,u=0,s=t;u<s.length;u++){var p=s[u];p[0].artist===i.artist&&(p.push(i),l=!0)}l||t.push([i])}}catch(h){o=!0,r=h}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return t.sort(function(e,t){var n=e[0].artist.toUpperCase(),o=t[0].artist.toUpperCase();return n<o?-1:n>o?1:0})},y=function(e){return function(t,n){var o=e(t).toUpperCase(),r=e(n).toUpperCase();return o<r?-1:o>r?1:0}},b=y(function(e){return e.name}),T=y(function(e){return e[0].artist}),E=function(e){function t(){return Object(o.a)(this,t),Object(a.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.createElement(h.Spin,{size:"large",className:"absoluteCenter"})}}]),t}(l.Component),j=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).onSearchSong=function(e){n.setState({searchString:e.length>0?e:void 0})},n.onSelectSong=function(e){n.props.history.push("/song/"+"".concat(e.url))},fetch("/content/list.json").then(function(e){return e.json()}).then(function(e){return n.setState({songList:e})});var r=n.props.match.params.errorMsg;return void 0!==r&&h.message.error(r),n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.state.songList,n=this.state.searchString;return void 0===t?l.createElement(E,null):l.createElement("div",null,l.createElement(h.Typography.Title,null,"Select song (",t.length,")"),l.createElement(h.Input.Search,{placeholder:"Search by artist / song name",size:"default",onChange:function(t){return e.onSearchSong(t.target.value)},allowClear:!0}),l.createElement(d,{songList:t,searchString:n,onSelectSong:this.onSelectSong}))}}]),t}(l.Component),O=(n(901),h.Typography.Title,h.Typography.Text,function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.song,n=e.defaultSelectedVersion,o=e.onSelectVersion,r=t.versions;return l.createElement("div",{className:"versionSelector"},r.length>1&&l.createElement("div",null,r.map(function(e,t){return l.createElement(h.Button,{key:"".concat(t),onClick:function(){return o(t)},type:e===n?"primary":"default"},e.name)})))}}]),t}(l.Component)),w=(h.Typography.Title,h.Typography.Text,h.Typography.Paragraph,function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).touchStartTime=void 0,n.touchStartLocation=void 0,n.onDoubleClick=function(){n.props.onClick()},n.onTouchStart=function(e){n.touchStartTime=window.performance.now(),n.touchStartLocation={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}},n.onTouchEnd=function(e){var t=window.performance.now()-n.touchStartTime,o={x:e.changedTouches[0].clientX-n.touchStartLocation.x,y:e.changedTouches[0].clientY-n.touchStartLocation.y},r=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2));t<=150&&r<=20&&n.props.onClick()},n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.version.content.split("\n");return l.createElement("div",{onDoubleClick:this.onDoubleClick,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},e.map(function(e,t){return l.createElement("pre",{key:t,className:"songParagraph"},e)}))}}]),t}(l.Component)),C=n(396),k={min:600,max:60,default:180},A=function(e){return"ass-".concat(e.id)},x=function(e){if(void 0!==localStorage){var t=localStorage.getItem(A(e));if(null!==t)return Number(t)}return void 0!==e.duration?e.duration:k.default},B=function(e,t,n){var o=void 0===n?localStorage:n;o&&o.setItem(A(e),String(t))},M=function(e,t,n){return t+e*(n-t)},V=(h.Typography.Title,h.Typography.Text),L=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).onSliderChange=function(e){n.props.onSetSpeed(N(e))},n.afterSliderChange=function(e){B(n.props.songVersion,N(e))},n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.autoScrollSpeed,o=e.onToggle;return l.createElement("div",null,l.createElement(h.Tooltip,{title:"Also activated by poking / double-clicking anywhere!",mouseEnterDelay:1},l.createElement(h.Button,{onClick:o,type:t?"primary":"default"},"Autoscroll ".concat(t?"ON":"OFF"))),l.createElement(h.Slider,{className:"autoScrollSlider",min:0,max:100,value:F(n),marks:Object(C.a)({},F(k.default),""),onChange:this.onSliderChange,onAfterChange:this.afterSliderChange}),l.createElement("div",{className:"autoScrollValueDiv"},l.createElement(V,{className:"autoScrollValueLabel"},"".concat(Math.floor(n/60)," min ").concat(Math.floor(n)%60>0?Math.floor(n)%60+" sec":""))))}}]),t}(l.Component),F=function(e){return M((e-k.min)/(k.max-k.min),0,100)},N=function(e){return M(e/100,k.min,k.max)},I=n(397),D=h.Typography.Title,P=(h.Typography.Text,function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).scrollDivRef=void 0,n.isCurrentlyMounted=!1,n.lastAutoScrollUpdate=void 0,n.scrollingFractions=0,n.onSelectVersion=function(e){n.props.history.push("/song/".concat(n.props.match.params.uri,"/").concat(e))},n.goToBeginning=function(){I.animateScroll.scrollToTop()},n.onToggleAutoScroll=function(){"autoScrollActive"in n.state&&n.setState({autoScrollActive:!n.state.autoScrollActive})},n.onSetAutoScrollSpeed=function(e){n.setState({autoScrollSpeed:e})},n.returnToPreviousMenu=function(){n.props.history.push("/")},n.updateAutoScroll=function(){if(n.isCurrentlyMounted&&"autoScrollActive"in n.state){var e=window.performance.now();if(n.state.autoScrollActive&&n.scrollDivRef&&void 0!==n.lastAutoScrollUpdate){var t=n.state.autoScrollSpeed,o=n.scrollDivRef.getBoundingClientRect(),r=(o.bottom-o.top-window.innerHeight)*(e-n.lastAutoScrollUpdate)/(1e3*t)+n.scrollingFractions,a=Math.floor(r),c=r-a;n.scrollingFractions=c,window.scrollBy(0,a),window.requestAnimationFrame(n.updateAutoScroll)}else window.requestAnimationFrame(n.updateAutoScroll),n.scrollingFractions=0;n.lastAutoScrollUpdate=e}};var r=e.match.params.uri;return fetch("/content/".concat(r)).then(function(e){return e.json()}).catch(function(){n.props.history.replace("/error/Song not found :(")}).then(function(t){void 0!==t&&n.selectVersionFromProps(t,e)}),n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,window.requestAnimationFrame=window.requestAnimationFrame||function(e){return window.setTimeout(e,50)},window.requestAnimationFrame(this.updateAutoScroll),window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1}},{key:"componentWillReceiveProps",value:function(e){"song"in this.state&&this.selectVersionFromProps(this.state.song,e)}},{key:"selectVersionFromProps",value:function(e,t){var n=t.match.params.selectedVersionIndex,o=e.versions[void 0!==n&&n<e.versions.length?n:0];this.setState({song:e,selectedVersion:o,autoScrollSpeed:x(o),autoScrollActive:!1})}},{key:"render",value:function(){var e=this;if("song"in this.state){var t=this.state,n=t.song,o=t.selectedVersion,r=t.autoScrollActive,a=t.autoScrollSpeed;return l.createElement("div",{ref:function(t){return e.scrollDivRef=t}},l.createElement(D,null,n.artist),l.createElement(D,{level:2},n.name),l.createElement("div",null,l.createElement(O,{song:n,defaultSelectedVersion:o,onSelectVersion:this.onSelectVersion}),l.createElement(h.Affix,{className:"autoScrollConfigBox",offsetTop:0},l.createElement(L,{songVersion:o,enabled:r,autoScrollSpeed:a,onToggle:this.onToggleAutoScroll,onSetSpeed:this.onSetAutoScrollSpeed}))),l.createElement("br",null),l.createElement(h.Tag,{color:"blue"},o.instrument),"guitar"===o.instrument&&l.createElement(h.Tag,{color:"volcano"},o.tuning),l.createElement(w,{song:n,version:o,onClick:this.onToggleAutoScroll}),l.createElement("br",null),l.createElement("div",null,l.createElement(h.Button,{onClick:this.goToBeginning},"To beginning"),l.createElement(h.Button,{onClick:this.returnToPreviousMenu},"To song selection")))}return l.createElement(E,null)}}]),t}(l.Component)),U=(h.Typography.Title,h.Typography.Text),R=function(e){function t(){return Object(o.a)(this,t),Object(a.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(U,null,"Page not found :("))}}]),t}(l.Component),q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.bgUrl;return l.createElement("div",{style:{backgroundImage:e?"url(".concat(e,")"):"",backgroundSize:"auto 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},l.createElement(s.a,{basename:"/tabz"},l.createElement(p.c,null,l.createElement(p.a,{exact:!0,path:"/",component:j}),l.createElement(p.a,{path:"/error/:errorMsg",component:j}),l.createElement(p.a,{path:"/song/:uri/:selectedVersionIndex?",component:P}),l.createElement(p.a,{component:R}))))}}]),t}(l.Component),z=document.getElementById("root");Object(u.render)(l.createElement(q,null),z)}},[[401,2,1]]]);
//# sourceMappingURL=main.789decf9.chunk.js.map