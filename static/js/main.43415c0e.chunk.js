(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{391:function(e,t,n){e.exports=n(904)},898:function(e,t,n){},904:function(e,t,n){"use strict";n.r(t);var o=n(32),r=n(33),a=n(35),c=n(34),i=n(36),l=n(1),u=n(7),s=n(378),h=n(16),d=h.Tree.TreeNode,f=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=Object(a.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).onSelectTreeNode=function(e){var t=n.props,o=t.songList,r=t.onSelectSong,a=e[0],c=o.find(function(e){return e.id===a});c&&r(c)},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.songList,n=e.searchString,o=e.onSelectSong;if(n){var r=t.map(function(e){return e}).sort(p(n));return l.createElement(h.List,{itemLayout:"horizontal",dataSource:r,renderItem:function(e){return l.createElement(h.List.Item,{onClick:function(){return o(e)}},l.createElement(h.List.Item.Meta,{title:"".concat(e.artist," - ").concat(e.name)}))}})}var a=S(t).sort(b).map(function(e){return e.sort(v)});return l.createElement(h.Tree,{showIcon:!0,switcherIcon:l.createElement(h.Icon,{type:"down"}),onSelect:this.onSelectTreeNode},a.map(function(e,t){var n="".concat(t);return l.createElement(d,{key:n,title:"".concat(e[0].artist," (").concat(e.length,")")},e.map(function(e){return l.createElement(d,{key:e.id,title:e.name})}))}))}}]),t}(l.Component),g=function(e,t){var n=e.name.toLowerCase(),o=e.artist.toLowerCase();return n.startsWith(t)||o.startsWith(t)?1:n.includes(t)||o.includes(t)?.5:0},p=function(e){var t=e.toLowerCase();return function(e,n){var o=g(e,t),r=g(n,t);return o<r?1:o>r?-1:0}},S=function(e){var t=[],n=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){for(var i=a.value,l=!1,u=0,s=t;u<s.length;u++){var h=s[u];h[0].artist===i.artist&&(h.push(i),l=!0)}l||t.push([i])}}catch(d){o=!0,r=d}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return t.sort(function(e,t){var n=e[0].artist.toUpperCase(),o=t[0].artist.toUpperCase();return n<o?-1:n>o?1:0})},m=function(e){return function(t,n){var o=e(t).toUpperCase(),r=e(n).toUpperCase();return o<r?-1:o>r?1:0}},v=m(function(e){return e.name}),b=m(function(e){return e[0].artist}),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).onSearchSong=function(e){n.setState({searchString:e.length>0?e:void 0})},n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.songList,o=t.onSelectSong,r=this.state.searchString;return l.createElement("div",null,l.createElement(h.Typography.Title,null,"Select song (",n.length,")"),l.createElement(h.Input.Search,{placeholder:"Search text",enterButton:"Search",size:"default",onChange:function(t){return e.onSearchSong(t.target.value)},allowClear:!0}),l.createElement(f,{songList:n,searchString:r,onSelectSong:o}))}}]),t}(l.Component),T=(h.Typography.Title,h.Typography.Text,function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.song,n=e.defaultSelectedVersion,o=e.onSelectVersion,r=t.versions;return l.createElement("div",{className:"versionSelector"},r.length>1&&l.createElement("div",null,r.map(function(e,t){return l.createElement(h.Button,{key:"".concat(t),onClick:function(){return o(e)},type:e===n?"primary":"default"},e.name)})))}}]),t}(l.Component)),E=(h.Typography.Title,h.Typography.Text,h.Typography.Paragraph,function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).touchStartTime=void 0,n.touchStartLocation=void 0,n.onDoubleClick=function(){n.props.onClick()},n.onTouchStart=function(e){n.touchStartTime=window.performance.now(),n.touchStartLocation={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}},n.onTouchEnd=function(e){var t=window.performance.now()-n.touchStartTime,o={x:e.changedTouches[0].clientX-n.touchStartLocation.x,y:e.changedTouches[0].clientY-n.touchStartLocation.y},r=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2));t<=150&&r<=20&&n.props.onClick()},n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.version.content.split("\n");return l.createElement("div",{onDoubleClick:this.onDoubleClick,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},e.map(function(e,t){return l.createElement("pre",{key:t,className:"songParagraph"},e)}))}}]),t}(l.Component)),j=n(143),O={min:600,max:60,default:180},C=function(e){return"ass-".concat(e.id)},w=function(e){if(void 0!==localStorage){var t=localStorage.getItem(C(e));if(null!==t)return Number(t)}return void 0!==e.duration?e.duration:O.default},k=function(e,t,n){var o=void 0===n?localStorage:n;o&&o.setItem(C(e),String(t))},A=function(e,t,n){return t+e*(n-t)},L=(h.Typography.Title,h.Typography.Text),x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).onSliderChange=function(e){n.props.onSetSpeed(F(e))},n.afterSliderChange=function(e){k(n.props.songVersion,F(e))},n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.autoScrollSpeed,o=e.onToggle;return l.createElement("div",null,l.createElement(h.Tooltip,{title:"Also activated by poking / double-clicking anywhere!",mouseEnterDelay:1},l.createElement(h.Button,{onClick:o,type:t?"primary":"default"},"Autoscroll ".concat(t?"ON":"OFF"))),l.createElement(h.Slider,{className:"autoScrollSlider",min:0,max:100,value:I(n),marks:Object(j.a)({},I(O.default),""),onChange:this.onSliderChange,onAfterChange:this.afterSliderChange}),l.createElement(L,{className:"autoScrollValueLabel"},"".concat(Math.floor(n/60)," min ").concat(Math.floor(n)%60>0?Math.floor(n)%60+" sec":"")))}}]),t}(l.Component),I=function(e){return A((e-O.min)/(O.max-O.min),0,100)},F=function(e){return A(e/100,O.min,O.max)},M=n(388),B=h.Typography.Title,N=(h.Typography.Text,function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).scrollDivRef=void 0,n.isCurrentlyMounted=!1,n.lastAutoScrollUpdate=void 0,n.scrollingFractions=0,n.onSelectVersion=function(e){n.setState({selectedVersion:e,autoScrollSpeed:w(e)})},n.goToBeginning=function(){M.animateScroll.scrollToTop()},n.onToggleAutoScroll=function(){n.setState({autoScrollActive:!n.state.autoScrollActive})},n.onSetAutoScrollSpeed=function(e){n.setState({autoScrollSpeed:e})},n.updateAutoScroll=function(){if(n.isCurrentlyMounted){var e=window.performance.now();if(n.state.autoScrollActive&&n.scrollDivRef&&void 0!==n.lastAutoScrollUpdate){var t=n.state.autoScrollSpeed,o=n.scrollDivRef.getBoundingClientRect(),r=o.bottom-o.top,a=window.innerHeight,c=e-n.lastAutoScrollUpdate,i=(r-a)*c/(1e3*t)+n.scrollingFractions,l=Math.floor(i),u=i-l;n.scrollingFractions=u,console.log(c,t,l,"     ",r,a),window.scrollBy(0,l),window.requestAnimationFrame(n.updateAutoScroll)}else window.requestAnimationFrame(n.updateAutoScroll),n.scrollingFractions=0;n.lastAutoScrollUpdate=e}};var r=n.props.song.versions[0];return n.state={selectedVersion:r,autoScrollActive:!1,autoScrollSpeed:w(r)},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,window.requestAnimationFrame=window.requestAnimationFrame||function(e){return window.setTimeout(e,50)},window.requestAnimationFrame(this.updateAutoScroll)}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.song,o=t.returnToPrevious,r=this.state,a=r.selectedVersion,c=r.autoScrollActive,i=r.autoScrollSpeed;return l.createElement("div",{ref:function(t){return e.scrollDivRef=t}},l.createElement(B,null,n.artist),l.createElement(B,{level:2},n.name),l.createElement("div",null,l.createElement(T,{song:n,defaultSelectedVersion:a,onSelectVersion:this.onSelectVersion}),l.createElement(h.Affix,{className:"autoScrollConfigBox",offsetTop:0},l.createElement(x,{songVersion:a,enabled:c,autoScrollSpeed:i,onToggle:this.onToggleAutoScroll,onSetSpeed:this.onSetAutoScrollSpeed}))),l.createElement("br",null),l.createElement(h.Tag,{color:"blue"},a.instrument),"guitar"===a.instrument&&l.createElement(h.Tag,{color:"volcano"},a.tuning),l.createElement(E,{song:n,version:a,onClick:this.onToggleAutoScroll}),l.createElement("br",null),l.createElement("div",null,l.createElement(h.Button,{onClick:this.goToBeginning},"To beginning"),l.createElement(h.Button,{onClick:o},"To song selection")))}}]),t}(l.Component)),V=function(e){function t(){return Object(o.a)(this,t),Object(a.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.createElement(h.Spin,{size:"large",className:"absoluteCenter"})}}]),t}(l.Component),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).onClickSelectSong=function(){n.setState({subState:{id:"select-song"}})},n.onSelectSong=function(e){n.getFullSongInfo(e).then(function(e){var t=n.state.subState;"display-song"===t.id&&n.setState({subState:Object(s.a)({},t,{song:e})})}),n.setState({subState:{id:"display-song",partialSongInfo:e}})},fetch("content/list.json").then(function(e){return e.json()}).then(function(e){return n.setState({songList:e})}).then(function(){var e=n.state.songList.find(function(e){return e.name.includes("Nice Guy")});n.getFullSongInfo(e).then(function(t){n.setState({subState:{id:"display-song",partialSongInfo:e,song:t}})})}),n.state={subState:{id:"select-song"}},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"getFullSongInfo",value:function(e){return fetch(e.url).then(function(e){return e.json()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.songList,o=t.subState;switch(o.id){case"none":return l.createElement("div",null,l.createElement(h.Typography.Title,null,"Tabz for days - React version"),l.createElement(h.Button,{onClick:this.onClickSelectSong},"Select song"));case"select-song":return n?l.createElement(y,{songList:n,onSelectSong:this.onSelectSong}):l.createElement(V,null);case"display-song":return o.song?l.createElement(N,{song:o.song,returnToPrevious:function(){e.setState({subState:{id:"select-song"}})}}):l.createElement(V,null)}}}]),t}(l.Component),D=(n(898),function(e){function t(e){var n;return Object(o.a)(this,t),n=Object(a.a)(this,Object(c.a)(t).call(this,e)),fetch("bg.png").then(function(e){n.setState({})}),n.state={},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.bgUrl;return l.createElement("div",{style:{backgroundImage:e?"url(".concat(e,")"):"",backgroundSize:"auto 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},l.createElement(U,null))}}]),t}(l.Component)),R=document.getElementById("root");Object(u.render)(l.createElement(D,null),R)}},[[391,2,1]]]);
//# sourceMappingURL=main.43415c0e.chunk.js.map